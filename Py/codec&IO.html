<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
        <title>codec&IO - Jigsaw of CxumoL</title>
        <meta name="keywords" content=""/>
        <meta name="description" content="welcome^_^haha"/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="container">
            
<div id="header">
  <div id="post-nav"><a href="/">Home</a>&nbsp;»&nbsp;<a href="/#Py">Py</a>&nbsp;»&nbsp;codec&IO</div>
</div>
<div class="clearfix"></div>
<div id="title">codec&IO</div>
  <div id="content">
  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#codec">codec</a><ul>
<li><a href="#lxml">lxml</a></li>
</ul>
</li>
<li><a href="#io">IO</a></li>
</ul>
</div>
<h2 id="codec">codec</h2>
<div class="hlcode"><pre>最简写法： # coding: utf8
</pre></div>


<p>被解成unicode的样子 s==u'\u4e00'<br />
这个样子可以用来编码 s.encode('utf8'),得到'\xe4\xb8\x80'
编码后才能用f.writelins()写入文件</p>
<p>内部处理用utf8</p>
<p>对于 s=='\u4e00' 没有u
则有 s.decode('unicode-escape')</p>
<p><code>f.read()</code>，随时加上<code>.decode('utf-8')</code></p>
<h3 id="lxml">lxml</h3>
<p>先确保html经过了utf-8解码，即code = html.decode('utf-8', 'ignore')，否则解析出错。<br />
因为中文被编码成utf-8之后变成 '/u2541'　之类的形式，lxml一遇到　“/”就会认为其标签结束。</p>
<h2 id="io">IO</h2>
<div class="hlcode"><pre><span class="n">f</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span><span class="n">mode</span><span class="p">)</span>
</pre></div>


<p>属性  </p>
<div class="hlcode"><pre>- closed #标记文件是否已经关闭，由close()改写  
- encoding #文件编码
- mode #打开模式  
- name #文件名
</pre></div>


<p>方法</p>
<div class="hlcode"><pre>F.read([size]) #size为读取的长度，以byte为单位
F.readline([size]) 
#读一行，如果定义了size，有可能返回的只是一行的一部分
F.readlines([size]) 
#把文件每一行作为一个list的一个成员，并返回这个list。其实它的内部是通过循环调用readline()来实现的。如果提供size参数，size是表示读取内容的总长，也就是说可能只读到文件的一部分。

F.write(str) 
#把str写到文件中，write()并不会在str后加上一个换行符
F.writelines(seq) 
#把seq的内容全部写到文件中。这个函数也只是忠实地写入，不会在每行后面加上任何东西。

F.close() 
F.next() 
#返回下一行，并将文件操作标记位移到下一行。把一个file用于for ... in file这样的语句时，就是调用next()函数来实现遍历的。
</pre></div>
  <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" ><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/3.0/cn/80x15.png" align="right" /></a>本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/">知识共享署名-非商业性使用-相同方式共享 3.0 中国大陆许可协议</a>进行许可。
</div>

        </div>
        <div id="footer">
            <span>
                Copyright © 2012-2015 CxumoL.
                Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
            </span>
        </div>
        <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?2e47888951355363c493b143348b1a31";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
    </body>
</html>